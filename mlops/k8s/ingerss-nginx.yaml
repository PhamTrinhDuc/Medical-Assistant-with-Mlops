apiVersion: networking.k8s.io/v1
kind: Ingress
metadata: 
  name: ingress-nginx
  annotations: 
    nginx.ingress.kubernetes.io/proxy-read-timeout: "3600"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "3600"
    nginx.ingress.kubernetes.io/websocket-services: "chatbot-frontend-service"
    # nginx.ingress.kubernetes.io/limit-rps: "5" # Requests / second / IP
    # nginx.ingress.kubernetes.io/limit-burst: "10" # Temporary overtaking allowed. Default: limit theo remote IP

spec: 
  ingressClassName: nginx
  rules: 
    - host: chatbot-medical # subdomain
      http: 
        paths: 
          - path: /
            pathType: Prefix
            backend: 
              service: 
                name: chatbot-frontend # must match service name of frontend
                port: 
                  number: 8501

    - host: api.chatbot-medical # subdomain
      http:
        paths:
          - path: /  
            pathType: Prefix
            backend:
              service:
                name: chatbot-backend # must match service name of backend
                port:
                  number: 8000